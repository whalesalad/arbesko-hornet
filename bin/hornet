#!/usr/bin/env ruby

require 'dante'
require_relative '../lib/hornet.rb'

runner = Dante::Runner.new('hornet')

runner.with_options do |opts|
  opts.on("-s", "--single PATH", "Path to single-pair images.") do |s|
    options[:single] = s
  end

  opts.on("-d", "--double PATH", "Path to double-pair images.") do |d|
    options[:double] = d
  end

  opts.on("--force", "Force processing of all images on startup.") do |f|
    options[:force] = f
  end
end

runner.execute do |options|
  hive = Hornet.start(options)
  hive.force! if options[:force]
  sleep
end